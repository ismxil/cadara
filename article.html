<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" type="image/svg+xml" href="assets/cadaranew-logo.svg">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article | Cadara Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <script src="tailwind.config.js"></script>
</head>

<body
    class="bg-brand-black text-brand-red font-serif selection:bg-brand-red selection:text-brand-black min-h-screen px-4">

    <main class="max-w-sm mx-auto">
        <!-- NAV Starts here-->
        <!-- Header with Logo and Hamburger Menu -->
        <div class="flex justify-between items-center mt-12">
            <a href="index.html" class="flex items-center gap-3 group relative z-50">
                <div id="main-logo-container"
                    class="w-8 h-8 md:w-10 md:h-10 flex items-center justify-center text-current transition-transform duration-500 ">
                </div>
            </a>
            <!-- Hamburger Menu Button -->
            <button id="menu-toggle" class="relative w-8 h-8 flex flex-col justify-center items-center group"
                aria-label="Toggle Menu">
                <span class="hamburger-line w-6 h-0.5 bg-current transition-all duration-300 ease-in-out"></span>
                <span class="hamburger-line w-6 h-0.5 bg-current transition-all duration-300 ease-in-out mt-1.5"></span>
                <span class="hamburger-line w-6 h-0.5 bg-current transition-all duration-300 ease-in-out mt-1.5"></span>
            </button>
        </div>

        <!-- Mobile Navigation Overlay -->
        <div id="nav-overlay"
            class="fixed inset-0 bg-brand-black z-50 opacity-0 pointer-events-none transition-opacity duration-300">
            <div class="h-full flex flex-col max-w-sm mx-auto">
                <!-- Header with Logo and Close Button -->
                <div class="flex justify-between items-center mt-12">
                    <a href="index.html" class="flex justify-center items-center">
                        <div id="nav-overlay-logo" class="w-8 h-8 flex items-center justify-center text-current"></div>
                    </a>
                    <!-- Close Button -->
                    <button id="menu-close" class="relative w-8 h-8 flex flex-col justify-center items-center"
                        aria-label="Close Menu">
                        <span
                            class="w-6 h-0.5 bg-current transition-all duration-300 ease-in-out rotate-45 absolute"></span>
                        <span
                            class="w-6 h-0.5 bg-current transition-all duration-300 ease-in-out -rotate-45 absolute"></span>
                    </button>
                </div>

                <!-- Navigation Items -->
                <nav class="mt-16 mb-8 nav-item transform translate-y-8 opacity-0 transition-all duration-300 ease-out"
                    style="transition-delay: 50ms;">
                    <ul class="space-y-4">
                        <li class="flex items-end justify-between group">
                            <a href="about.html"
                                class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">About</a>
                            <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                            <span class="font-mono text-sm md:text-lg">I</span>
                        </li>
                        <li class="flex items-end justify-between group">
                            <a href="work.html"
                                class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">Work</a>
                            <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                            <span class="font-mono text-sm md:text-lg">II</span>
                        </li>
                        <li class="flex items-end justify-between group">
                            <a href="expertise.html"
                                class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">Expertise</a>
                            <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                            <span class="font-mono text-sm md:text-lg">III</span>
                        </li>
                        <li class="flex items-end justify-between group">
                            <a href="play.html"
                                class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">Contact</a>
                            <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                            <span class="font-mono text-sm md:text-lg">IV</span>
                        </li>
                        <li class="flex items-end justify-between group">
                            <a href="thought.html"
                                class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">Blog</a>
                            <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                            <span class="font-mono text-sm md:text-lg">V</span>
                        </li>
                    </ul>
                </nav>

                <!-- Social Links -->
                <div class="nav-item transform translate-y-8 opacity-0 transition-all duration-300 ease-out"
                    style="transition-delay: 100ms;">
                    <div class="flex justify-center gap-6 mt-6">
                        <!-- LinkedIn -->
                        <a href="https://linkedin.com/company/cadarastudio" target="_blank"
                            class="hover:scale-110 transition-transform duration-200" aria-label="LinkedIn">
                            <svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path fill="currentColor"
                                    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037c-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85c3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.06 2.06 0 0 1-2.063-2.065a2.064 2.064 0 1 1 2.063 2.065m1.782 13.019H3.555V9h3.564zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0z" />
                            </svg>
                        </a>
                        <!-- Behance -->
                        <a href="https://behance.net/cadara" target="_blank"
                            class="hover:scale-110 transition-transform duration-200" aria-label="Behance">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M22 7h-7V5h7v2zm1.726 10c-.442 1.297-2.029 3-5.101 3-3.074 0-5.564-1.729-5.564-5.675 0-3.91 2.325-5.92 5.466-5.92 3.082 0 4.964 1.782 5.375 4.426.078.506.109 1.188.095 2.14H15.97c.13 3.211 3.483 3.312 4.588 2.029h3.168zm-7.686-4h4.965c-.105-1.547-1.136-2.219-2.477-2.219-1.466 0-2.277.768-2.488 2.219zm-9.574 6.988H0V5.021h6.953c5.476.081 5.58 5.444 2.72 6.906 3.461 1.26 3.577 8.061-3.207 8.061zM3 11h3.584c2.508 0 2.906-3-.312-3H3v3zm3.391 3H3v3.016h3.341c3.055 0 2.868-3.016.05-3.016z" />
                            </svg>
                        </a>
                        <!-- Instagram -->
                        <a href="https://instagram.com/cadarastudio" target="_blank"
                            class="hover:scale-110 transition-transform duration-200" aria-label="Instagram">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z" />
                            </svg>
                        </a>
                        <!-- X -->
                        <a href="https://x.com/cadarastudio" target="_blank"
                            class="hover:scale-110 transition-transform duration-200" aria-label="X">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                            </svg>
                        </a>
                        <!-- GitHub -->
                        <a href="https://github.com/cadara-studio" target="_blank"
                            class="hover:scale-110 transition-transform duration-200" aria-label="GitHub">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
                            </svg>
                        </a>
                        <!-- Email -->
                        <a href="mailto:cadarastudio@gmail.com"
                            class="hover:scale-110 transition-transform duration-200" aria-label="Email">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Footer Info -->
                <footer
                    class="mt-8 opacity-80 text-center nav-item transform translate-y-8 opacity-0 transition-all duration-300 ease-out"
                    style="transition-delay: 150ms;">
                    <p class="text-xs text-center font-mono uppercase tracking-widest mb-2">(c) 2026</p>
                    <div class="flex justify-center items-center mt-4">
                        <a href="#" id="menu-color-randomizer" class="hover:scale-110 transition-transform duration-200"
                            aria-label="Randomize Colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <path fill="currentColor"
                                    d="M15.98 1.804a1 1 0 0 0-1.96 0l-.24 1.192a1 1 0 0 1-.784.785l-1.192.238a1 1 0 0 0 0 1.962l1.192.238a1 1 0 0 1 .785.785l.238 1.192a1 1 0 0 0 1.962 0l.238-1.192a1 1 0 0 1 .785-.785l1.192-.238a1 1 0 0 0 0-1.962l-1.192-.238a1 1 0 0 1-.785-.785zm-9.031 3.88a1 1 0 0 0-1.898 0l-.683 2.051a1 1 0 0 1-.633.633l-2.051.683a1 1 0 0 0 0 1.898l2.051.684a1 1 0 0 1 .633.632l.683 2.051a1 1 0 0 0 1.898 0l.683-2.051a1 1 0 0 1 .633-.633l2.051-.683a1 1 0 0 0 0-1.898l-2.051-.683a1 1 0 0 1-.633-.633zm7 8a1 1 0 0 0-1.898 0l-.184.551a1 1 0 0 1-.632.633l-.551.183a1 1 0 0 0 0 1.898l.551.183a1 1 0 0 1 .633.633l.183.551a1 1 0 0 0 1.898 0l.184-.551a1 1 0 0 1 .632-.633l.551-.183a1 1 0 0 0 0-1.898l-.551-.184a1 1 0 0 1-.633-.632z" />
                            </svg>
                        </a>
                    </div>
                </footer>
            </div>
        </div>
        <!-- NAV Ends here-->

        <!-- Back Link -->
        <a href="thought.html"
            class="inline-flex items-center gap-2 mt-8 mb-6 text-sm font-mono uppercase tracking-widest opacity-70 hover:opacity-100 transition-opacity">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            Back to Blog
        </a>

        <!-- Article Content Area -->
        <article id="article-container">
            <!-- Loading State -->
            <div id="article-loading" class="py-16 text-center">
                <div
                    class="inline-block w-6 h-6 border-2 border-current border-t-transparent rounded-full animate-spin mb-4">
                </div>
                <p class="font-mono text-sm uppercase tracking-widest opacity-70">Loading article...</p>
            </div>

            <!-- Error State (hidden by default) -->
            <div id="article-error" class="py-16 text-center hidden">
                <p class="font-display text-2xl uppercase mb-4">Article not found</p>
                <p class="text-sm opacity-70 mb-6">This article couldn't be loaded. It may not be available in the feed.
                </p>
                <a id="article-fallback-link" href="#" target="_blank"
                    class="inline-block border-2 border-current px-6 py-3 font-display text-sm uppercase tracking-widest hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all duration-200 shadow-[2px_2px_0_currentColor]">
                    Read on Substack →
                </a>
            </div>

            <!-- Article Content (hidden by default) -->
            <div id="article-content" class="hidden">
                <header class="mb-8">
                    <h1 id="article-title"
                        class="font-display text-5xl md:text-6xl font-black uppercase tracking-tight mb-4"></h1>
                    <div class="flex items-center gap-3 text-sm opacity-70 font-mono">
                        <time id="article-date"></time>
                        <span>·</span>
                        <span id="article-read-time"></span>
                    </div>
                    <p id="article-description" class="mt-4 text-base opacity-80"></p>
                </header>
                <div id="article-body" class="article-content mb-12"></div>
                <div class="border-t border-current border-dotted pt-6 mb-12">
                    <a id="article-substack-link" href="#" target="_blank"
                        class="inline-flex items-center gap-2 text-sm font-mono uppercase tracking-widest opacity-70 hover:opacity-100 transition-opacity">
                        Read original on Substack
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3" />
                        </svg>
                    </a>
                </div>
            </div>
        </article>

        <!-- Continue Reading Section (populated by JS) -->
        <section id="continue-reading" class="mb-16 hidden">
            <h2 class="text-2xl font-bold mb-8 opacity-80">Continue reading...</h2>
            <div id="continue-reading-list" class="space-y-8"></div>
        </section>

        <!-- Navigation Section -->
        <nav class="w-full max-w-sm">
            <ul class="space-y-4">
                <li class="flex items-end justify-between group">
                    <a href="about.html"
                        class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">About</a>
                    <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                    <span class="font-mono text-sm md:text-lg">I</span>
                </li>
                <li class="flex items-end justify-between group">
                    <a href="work.html"
                        class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">Work</a>
                    <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                    <span class="font-mono text-sm md:text-lg">II</span>
                </li>
                <li class="flex items-end justify-between group">
                    <a href="expertise.html"
                        class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">Expertise</a>
                    <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                    <span class="font-mono text-sm md:text-lg">III</span>
                </li>
                <li class="flex items-end justify-between group">
                    <a href="play.html"
                        class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">Contact</a>
                    <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                    <span class="font-mono text-sm md:text-lg">IV</span>
                </li>
                <li class="flex items-end justify-between group">
                    <a href="thought.html"
                        class="uppercase tracking-widest text-lg md:text-2xl font-display transition-all duration-300 group-hover:pl-2">Blog</a>
                    <div class="flex-grow border-b border-dotted border-current mx-2 mb-1"></div>
                    <span class="font-mono text-sm md:text-lg">V</span>
                </li>
            </ul>
        </nav>

        <!-- Footer Info -->
        <footer class="my-16 opacity-80 text-center">
            <p class="text-xs text-center font-mono uppercase tracking-widest mb-2">(c) 2026</p>
            <div class="flex justify-center items-center mt-4">
                <a href="#" id="color-randomizer" class="hover:scale-110 transition-transform duration-200"
                    aria-label="Randomize Colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path fill="currentColor"
                            d="M15.98 1.804a1 1 0 0 0-1.96 0l-.24 1.192a1 1 0 0 1-.784.785l-1.192.238a1 1 0 0 0 0 1.962l1.192.238a1 1 0 0 1 .785.785l.238 1.192a1 1 0 0 0 1.962 0l.238-1.192a1 1 0 0 1 .785-.785l1.192-.238a1 1 0 0 0 0-1.962l-1.192-.238a1 1 0 0 1-.785-.785zm-9.031 3.88a1 1 0 0 0-1.898 0l-.683 2.051a1 1 0 0 1-.633.633l-2.051.683a1 1 0 0 0 0 1.898l2.051.684a1 1 0 0 1 .633.632l.683 2.051a1 1 0 0 0 1.898 0l.683-2.051a1 1 0 0 1 .633-.633l2.051-.683a1 1 0 0 0 0-1.898l-2.051-.683a1 1 0 0 1-.633-.633zm7 8a1 1 0 0 0-1.898 0l-.184.551a1 1 0 0 1-.632.633l-.551.183a1 1 0 0 0 0 1.898l.551.183a1 1 0 0 1 .633.633l.183.551a1 1 0 0 0 1.898 0l.184-.551a1 1 0 0 1 .632-.633l.551-.183a1 1 0 0 0 0-1.898l-.551-.184a1 1 0 0 1-.633-.632z" />
                    </svg>
                </a>
            </div>
        </footer>
    </main>

    <script src="script.js"></script>
    <script>
        (function () {
            const params = new URLSearchParams(window.location.search);
            const slug = params.get('slug');
            const substackUrl = `https://wandarer.com/p/${slug}`;

            // Set fallback links immediately
            const fallbackLink = document.getElementById('article-fallback-link');
            const substackLink = document.getElementById('article-substack-link');
            if (fallbackLink) fallbackLink.href = substackUrl;
            if (substackLink) substackLink.href = substackUrl;

            if (!slug) {
                showError();
                return;
            }

            BlogCache.getArticle(slug, function (article, meta) {
                if (!article) {
                    showError();
                    return;
                }
                renderArticle(article);
            });

            // Populate "Continue reading" with next 3 articles
            BlogCache.getArticles(function (articles) {
                if (!articles || articles.length < 2) return;

                // Find current article index
                const currentIdx = articles.findIndex(a => a.slug === slug);

                // Pick next 3 articles (wrapping around)
                const picks = [];
                for (let i = 1; picks.length < 3 && i < articles.length; i++) {
                    const idx = (currentIdx + i) % articles.length;
                    picks.push(articles[idx]);
                }

                if (picks.length === 0) return;

                const container = document.getElementById('continue-reading-list');
                let html = '';
                picks.forEach(function (a) {
                    html += `
                        <article class="flex gap-6">
                            <span class="font-mono text-sm opacity-50 w-12 flex-shrink-0">${a.year}</span>
                            <div>
                                <a href="article.html?slug=${a.slug}"
                                    class="text-2xl font-semibold hover:opacity-70 transition-opacity block mb-1">${a.title}</a>
                                <p class="text-sm opacity-70">${a.description}</p>
                            </div>
                        </article>`;
                });

                container.innerHTML = html;
                document.getElementById('continue-reading').classList.remove('hidden');
            });

            function renderArticle(article) {
                // Set page title
                document.title = `${article.title} | Cadara Studio`;

                // Populate article
                document.getElementById('article-title').textContent = article.title;
                document.getElementById('article-description').textContent = article.description;

                if (article.pubDate) {
                    const date = new Date(article.pubDate);
                    const formatted = date.toLocaleDateString('en-GB', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric',
                    });
                    document.getElementById('article-date').textContent = formatted;
                }

                // Estimate read time
                const wordCount = article.content.replace(/<[^>]+>/g, '').split(/\s+/).length;
                const readTime = Math.max(1, Math.ceil(wordCount / 230));
                document.getElementById('article-read-time').textContent = `${readTime} min read`;

                // Clean and inject content
                const cleanedContent = cleanSubstackHTML(article.content);
                document.getElementById('article-body').innerHTML = cleanedContent;

                // Show content, hide loading
                document.getElementById('article-loading').classList.add('hidden');
                document.getElementById('article-content').classList.remove('hidden');
            }

            function cleanSubstackHTML(html) {
                const temp = document.createElement('div');
                temp.innerHTML = html;

                // Remove Substack subscription widgets
                temp.querySelectorAll('.subscription-widget-wrap-editor, .subscription-widget-wrap').forEach(el => el.remove());

                // Remove Substack button wrappers
                temp.querySelectorAll('.image-link-expand, .pencraft, button').forEach(el => el.remove());

                // Clean up images
                temp.querySelectorAll('img').forEach(img => {
                    img.removeAttribute('srcset');
                    img.removeAttribute('sizes');
                    img.removeAttribute('data-attrs');
                    img.removeAttribute('fetchpriority');
                    img.removeAttribute('loading');
                    img.classList.remove('sizing-normal');
                    img.style.maxWidth = '100%';
                    img.style.height = 'auto';
                    img.style.borderRadius = '4px';
                });

                // Simplify picture elements
                temp.querySelectorAll('picture').forEach(picture => {
                    const img = picture.querySelector('img');
                    if (img) picture.replaceWith(img);
                });

                // Clean up image containers
                temp.querySelectorAll('.image2-inset').forEach(el => {
                    const img = el.querySelector('img');
                    if (img) el.replaceWith(img);
                });

                // Simplify figure/captioned-image-container
                temp.querySelectorAll('.captioned-image-container').forEach(container => {
                    const figure = container.querySelector('figure');
                    if (figure) container.replaceWith(figure);
                });

                // Clean image links
                temp.querySelectorAll('a.image-link').forEach(link => {
                    const img = link.querySelector('img');
                    if (img) link.replaceWith(img);
                });

                // Handle YouTube embeds
                temp.querySelectorAll('.youtube-wrap').forEach(wrapper => {
                    const iframe = wrapper.querySelector('iframe');
                    if (iframe) {
                        const container = document.createElement('div');
                        container.className = 'article-video-embed';
                        iframe.style.width = '100%';
                        iframe.style.aspectRatio = '16/9';
                        iframe.style.height = 'auto';
                        iframe.style.borderRadius = '4px';
                        container.appendChild(iframe);
                        wrapper.replaceWith(container);
                    }
                });

                // Remove native video placeholders
                temp.querySelectorAll('.native-video-embed').forEach(el => el.remove());

                // Remove empty paragraphs
                temp.querySelectorAll('p').forEach(p => {
                    if (!p.textContent.trim() && !p.querySelector('img, iframe, video')) p.remove();
                });

                return temp.innerHTML;
            }

            function showError() {
                document.getElementById('article-loading').classList.add('hidden');
                document.getElementById('article-error').classList.remove('hidden');
            }
        })();
    </script>
</body>

</html>